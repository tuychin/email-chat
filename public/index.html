<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Email-chat" />
    <meta name="description" content="Email-chat" />
    <meta name="theme-color" content="#ffffff" />
    <title>Email-chat</title>
    <link rel="apple-touch-icon" href="assets/echat-logo-512.png" />
    <link rel="shortcut icon" href="assets/favicon.ico">
    <link rel="manifest" href="manifest.json">

    <style>
        .app-placeholder {
            display: grid;
            place-items: center;
            height: 100vh;
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>
</head>
<body>
    <noscript>
        <div class="app-placeholder">
            <h1>Для работы приложения необходим JavaScript</h1>
        </div>
    </noscript> 
    <div id="root">
        <div class="app-placeholder">
            <?xml version="1.0" encoding="utf-8"?>
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: rgb(255, 255, 255); display: block; shape-rendering: auto;" width="100px" height="100px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                <circle cx="50" cy="50" fill="none" stroke="#c1c1c1" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">
                    <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>
                </circle>
            </svg>
        </div>
    </div>

<script type="module">
import {Workbox} from 'https://storage.googleapis.com/workbox-cdn/releases/4.3.0/workbox-window.prod.mjs';

// Service-worker register
if ('serviceWorker' in navigator) { 
    const wb = new Workbox('./service-worker-workbox.js');

    wb.addEventListener('installed', event => {
        if (event.isUpdate) {
            if (confirm(`Приложение обновлено. Перезагрузить, чтобы изменения вступили в силу?`)) {
                window.location.reload();
            }
        } else {
            console.log(`[service-worker]: The app is offline-ready`)
        }
    });

    wb.register();
} else {
    console.error('[service-worker]: Service worker is not supported');
}
</script>
</body>
</html>